---
# main.yml
apache_packages:
apache_service:
apache_state:
apache_enabled:
apache_user:
apache_group:

apache_conf_manage:
apache_conf_template:
apache_httpd_dir:
apache_conf_file:
apache_conf_dir:
apache_confd_dir:
apache_mod_dir:
apache_vhost_dir:
apache_ports_file: "{{ apache_conf_dir }}/ports.conf"

apache_server_tokens: OS
apache_server_signature: 'On'
apache_trace_enable: 'On'
apache_server_name: "{{ ansible_fqdn }}"
apache_server_root:
apache_pidfile:
apache_timeout: '120'
apache_keepalive: Off
apache_max_keepalive_requests: 100
apache_keepalive_timeout: '15'
apache_limitreqfieldsize: '8190'
root_directory_secured: False
apache_root_directory_options: 'FollowSymLinks'
apache_root_directory_secured: False
apache_default_type: 'text/plain'
apache_logroot:
apache_error_log:
apache_log_level: 'warn'
apache_sendfile: 'On'
apache_vhost_include_pattern: '*'

apache_ssl_random_seed_bytes: '512'
apache_ssl_sessioncachetimeout: '300'
apache_ssl_pass_phrase_dialog: 'builtin'
apache_ssl_protocol: 'all -SSLv2 -SSLv3'
apache_session_cache: '/var/cache/mod_ssl/scache(512000)' ## FIX ME
apache_ssl_mutex: 'default' ## FIX ME ??
apache_ssl_cryptodevice: 'builtin'
apache_ssl_cipher: 'HIGH:MEDIUM:!aNULL:!MD5:!RC4'
apache_ssl_options: 'StdEnvVars'

apache_vhost_template: vhosts.j2
apache_vhosts:
  - {
      template: 'vhosts.j2',
      server_name: "{{ ansible_fqdn }}",
      port: '80',
      ip: "{{ ansible_default_ipv4['address'] }}",
      ssl: False,
      docroot: '/var/www/html',
      aliases: [
        {
          aliasmatch: 'steve',
          path: 'bambling'
        },
          {
          alias: 'blah',
          path: 'baz'
        },
      ],
    }

# mods/ssl.yml
apache_mod_ssl_manage: True
apache_mod_ssl_package:
apache_mod_ssl_template: 'mods/ssl.conf.j2'
apache_mod_ssl_conf_file: 'ssl.conf'

apache_mod_status_manage: True
apache_mod_status_template: 'mods/status.conf.j2'
apache_mod_status_conf_file: 'status.conf'
apache_mod_status_allow_from:
  - 127.0.0.1
  - ::1
